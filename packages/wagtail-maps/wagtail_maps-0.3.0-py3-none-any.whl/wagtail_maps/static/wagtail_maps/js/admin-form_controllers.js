!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function n(e,t,r){return(t=c(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function s(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=i(e);if(t){var o=i(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function c(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function l(e){return e.replace(/(?:[_-])([a-z0-9])/g,((e,t)=>t.toUpperCase()))}function f(e){return e.charAt(0).toUpperCase()+e.slice(1)}function p(e,t){const r=g(e);return Array.from(r.reduce(((e,r)=>(function(e,t){const r=e[t];return Array.isArray(r)?r:[]}(r,t).forEach((t=>e.add(t))),e)),new Set))}function d(e,t){return g(e).reduce(((e,r)=>(e.push(...function(e,t){const r=e[t];return r?Object.keys(r).map((e=>[e,r[e]])):[]}(r,t)),e)),[])}function g(e){const t=[];for(;e;)t.push(e),e=Object.getPrototypeOf(e);return t.reverse()}function h(e){return e.reduce(((e,[t,r])=>Object.assign(Object.assign({},e),{[t]:r})),{})}function y([e,t],r){return function(e){const t=`${n=e.token,n.replace(/([A-Z])/g,((e,t)=>`-${t.toLowerCase()}`))}-value`,r=function(e){const t=function(e){const t=b(e.typeObject.type);if(!t)return;const r=m(e.typeObject.default);if(t!==r){const n=e.controller?`${e.controller}.${e.token}`:e.token;throw new Error(`The specified default value for the Stimulus Value "${n}" must match the defined type "${t}". The provided default value of "${e.typeObject.default}" is of type "${r}".`)}return t}({controller:e.controller,token:e.token,typeObject:e.typeDefinition}),r=m(e.typeDefinition),n=b(e.typeDefinition),o=t||r||n;if(o)return o;const i=e.controller?`${e.controller}.${e.typeDefinition}`:e.token;throw new Error(`Unknown value type "${i}" for "${e.token}" value`)}(e);var n;return{type:r,key:t,name:l(t),get defaultValue(){return function(e){const t=b(e);if(t)return v[t];const r=e.default;return void 0!==r?r:e}(e.typeDefinition)},get hasCustomDefaultValue(){return void 0!==m(e.typeDefinition)},reader:w[r],writer:O[r]||O.default}}({controller:r,token:e,typeDefinition:t})}function b(e){switch(e){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function m(e){switch(typeof e){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}return Array.isArray(e)?"array":"[object Object]"===Object.prototype.toString.call(e)?"object":void 0}(()=>{function e(e){function t(){return Reflect.construct(e,arguments,new.target)}return t.prototype=Object.create(e.prototype,{constructor:{value:t}}),Reflect.setPrototypeOf(t,e),t}try{return function(){const t=e((function(){this.a.call(this)}));t.prototype.a=function(){},new t}(),e}catch(e){return e=>class extends e{}}})(),Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End"},h("abcdefghijklmnopqrstuvwxyz".split("").map((e=>[e,e])))),h("0123456789".split("").map((e=>[e,e]))));const v={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},w={array(e){const t=JSON.parse(e);if(!Array.isArray(t))throw new TypeError(`expected value of type "array" but instead got value "${e}" of type "${m(t)}"`);return t},boolean:e=>!("0"==e||"false"==String(e).toLowerCase()),number:e=>Number(e),object(e){const t=JSON.parse(e);if(null===t||"object"!=typeof t||Array.isArray(t))throw new TypeError(`expected value of type "object" but instead got value "${e}" of type "${m(t)}"`);return t},string:e=>e},O={default:function(e){return`${e}`},array:$,object:$};function $(e){return JSON.stringify(e)}class j{constructor(e){this.context=e}static get shouldLoad(){return!0}static afterLoad(e,t){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(e,{target:t=this.element,detail:r={},prefix:n=this.identifier,bubbles:o=!0,cancelable:i=!0}={}){const u=new CustomEvent(n?`${n}:${e}`:e,{detail:r,bubbles:o,cancelable:i});return t.dispatchEvent(u),u}}j.blessings=[function(e){return p(e,"classes").reduce(((e,t)=>{return Object.assign(e,{[`${r=t}Class`]:{get(){const{classes:e}=this;if(e.has(r))return e.get(r);{const t=e.getAttributeName(r);throw new Error(`Missing attribute "${t}"`)}}},[`${r}Classes`]:{get(){return this.classes.getAll(r)}},[`has${f(r)}Class`]:{get(){return this.classes.has(r)}}});var r}),{})},function(e){return p(e,"targets").reduce(((e,t)=>{return Object.assign(e,{[`${r=t}Target`]:{get(){const e=this.targets.find(r);if(e)return e;throw new Error(`Missing target element "${r}" for "${this.identifier}" controller`)}},[`${r}Targets`]:{get(){return this.targets.findAll(r)}},[`has${f(r)}Target`]:{get(){return this.targets.has(r)}}});var r}),{})},function(e){const t=d(e,"values"),r={valueDescriptorMap:{get(){return t.reduce(((e,t)=>{const r=y(t,this.identifier),n=this.data.getAttributeNameForKey(r.key);return Object.assign(e,{[n]:r})}),{})}}};return t.reduce(((e,t)=>Object.assign(e,function(e,t){const r=y(e,t),{key:n,name:o,reader:i,writer:u}=r;return{[o]:{get(){const e=this.data.get(n);return null!==e?i(e):r.defaultValue},set(e){void 0===e?this.data.delete(n):this.data.set(n,u(e))}},[`has${f(o)}`]:{get(){return this.data.has(n)||r.hasCustomDefaultValue}}}}(t))),r)},function(e){return p(e,"outlets").reduce(((e,t)=>Object.assign(e,function(e){const t=(r=e,l(r.replace(/--/g,"-").replace(/__/g,"_")));var r;return{[`${t}Outlet`]:{get(){const t=this.outlets.find(e);if(t){const r=this.application.getControllerForElementAndIdentifier(t,e);if(r)return r;throw new Error(`Missing "data-controller=${e}" attribute on outlet element for "${this.identifier}" controller`)}throw new Error(`Missing outlet element "${e}" for "${this.identifier}" controller`)}},[`${t}Outlets`]:{get(){const t=this.outlets.findAll(e);return t.length>0?t.map((t=>{const r=this.application.getControllerForElementAndIdentifier(t,e);if(r)return r;console.warn(`The provided outlet element is missing the outlet controller "${e}" for "${this.identifier}"`,t)})).filter((e=>e)):[]}},[`${t}OutletElement`]:{get(){const t=this.outlets.find(e);if(t)return t;throw new Error(`Missing outlet element "${e}" for "${this.identifier}" controller`)}},[`${t}OutletElements`]:{get(){return this.outlets.findAll(e)}},[`has${f(t)}Outlet`]:{get(){return this.outlets.has(e)}}}}(t))),{})}],j.targets=[],j.outlets=[],j.values={};var A=/^geo:([-+]?\d+(?:\.\d+)?),([-+]?\d+(?:\.\d+)?)(?:\?z=(\d{1,2}))?$/,S=new Event("wagtail:hide"),E=function(t){o(i,t);var n=a(i);function i(){return e(this,i),n.apply(this,arguments)}return r(i,[{key:"errorMessageTargetConnected",value:function(e){e.setAttribute("hidden","")}},{key:"set",value:function(){this.errorMessageTarget.setAttribute("hidden","");var e=this.inputTarget.value.match(A);if(e){var t=document.querySelector('[name="'.concat(this.prefixValue,'-latitude"]')),r=document.querySelector('[name="'.concat(this.prefixValue,'-longitude"]'));t.value=Number(e[1]),r.value=Number(e[2]),this.dialogIdValue&&document.getElementById(this.dialogIdValue).dispatchEvent(S)}else this.errorMessageTarget.removeAttribute("hidden")}}]),i}(j);function k(e){return e===Number(e).toString()}function T(e,t){return e+t}n(E,"values",{dialogId:String,prefix:String}),n(E,"targets",["errorMessage","input"]);var C=function(t){o(i,t);var n=a(i);function i(){return e(this,i),n.apply(this,arguments)}return r(i,[{key:"connect",value:function(){this.latInput=this.element.querySelector('[name="center_latitude"]'),this.lngInput=this.element.querySelector('[name="center_longitude"]')}},{key:"errorMessageTargetConnected",value:function(e){e.setAttribute("hidden","")}},{key:"calculate",value:function(){var e=[],t=[];this.errorMessageTarget.setAttribute("hidden",""),document.querySelectorAll(this.pointSelectorValue).forEach((function(r){var n=r.querySelector("[name$=-latitude]").value,o=r.querySelector("[name$=-longitude]").value;k(n)&&k(o)&&(e.push(Number(n)),t.push(Number(o)))})),e.length?(this.latInput.value=e.reduce(T)/e.length,this.lngInput.value=t.reduce(T)/t.length):this.errorMessageTarget.removeAttribute("hidden")}}]),i}(j);if(n(C,"values",{pointSelector:{type:String,default:"#id_points-FORMS > :not(.deleted)"}}),n(C,"targets",["errorMessage"]),!window.Stimulus)throw new Error("You must instantiate a Stimulus application at first.");window.Stimulus.register("geo-coordinates",E),window.Stimulus.register("map-center-coordinates",C)}();
//# sourceMappingURL=admin-form_controllers.js.map
