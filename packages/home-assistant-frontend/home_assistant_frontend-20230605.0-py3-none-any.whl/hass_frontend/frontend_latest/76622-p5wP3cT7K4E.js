"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[76622],{7323:(e,t,o)=>{o.d(t,{p:()=>i});const i=(e,t)=>e&&e.config.components.includes(t)},81582:(e,t,o)=>{o.d(t,{DJ:()=>i,RQ:()=>a,iJ:()=>r,pB:()=>n});const i=(e,t,o)=>{const i={type:"config_entries/subscribe"};return o&&o.type&&(i.type_filter=o.type),e.connection.subscribeMessage((e=>t(e)),i)},n=(e,t)=>{const o={};return t&&(t.type&&(o.type_filter=t.type),t.domain&&(o.domain=t.domain)),e.callWS({type:"config_entries/get",...o})},a=(e,t)=>e.callWS({type:"config_entries/get_single",entry_id:t}),r=(e,t)=>e.callApi("DELETE",`config/config_entries/entry/${t}`)},73728:(e,t,o)=>{o.d(t,{D4:()=>d,D7:()=>h,Ky:()=>s,V3:()=>g,WW:()=>f,XO:()=>l,ZJ:()=>u,oi:()=>c});var i=o(97330),n=o(38346),a=o(5986);const r={"HA-Frontend-Base":`${location.protocol}//${location.host}`},s=(e,t)=>{var o;return e.callApi("POST","config/config_entries/flow",{handler:t,show_advanced_options:Boolean(null===(o=e.userData)||void 0===o?void 0:o.showAdvanced)},r)},d=(e,t)=>e.callApi("GET",`config/config_entries/flow/${t}`,void 0,r),l=(e,t,o)=>e.callApi("POST",`config/config_entries/flow/${t}`,o,r),c=(e,t)=>e.callApi("DELETE",`config/config_entries/flow/${t}`),h=e=>e.sendMessagePromise({type:"config_entries/flow/progress"}),p=(e,t)=>e.subscribeEvents((0,n.D)((()=>h(e).then((e=>t.setState(e,!0)))),500,!0),"config_entry_discovered"),u=e=>(0,i._)(e,"_configFlowProgress",h,p),g=(e,t)=>u(e.connection).subscribe(t),f=(e,t)=>t.context.title_placeholders&&0!==Object.keys(t.context.title_placeholders).length?e(`component.${t.handler}.config.flow_title`,t.context.title_placeholders)||("name"in t.context.title_placeholders?t.context.title_placeholders.name:(0,a.Lh)(e,t.handler)):(0,a.Lh)(e,t.handler)},2852:(e,t,o)=>{o.d(t,{q:()=>s,t:()=>d});var i=o(68144),n=o(73728),a=o(5986),r=o(52871);const s=r.G,d=(e,t)=>(0,r.w)(e,t,{loadDevicesAndAreas:!0,createFlow:async(e,t)=>{const[o]=await Promise.all([(0,n.Ky)(e,t),e.loadBackendTranslation("config",t),e.loadBackendTranslation("selector",t),e.loadBackendTranslation("title",t)]);return o},fetchFlow:async(e,t)=>{const o=await(0,n.D4)(e,t);return await e.loadBackendTranslation("config",o.handler),await e.loadBackendTranslation("selector",o.handler),o},handleFlowStep:n.XO,deleteFlow:n.oi,renderAbortDescription(e,t){const o=e.localize(`component.${t.handler}.config.abort.${t.reason}`,t.description_placeholders);return o?i.dy` <ha-markdown allowsvg breaks .content="${o}"></ha-markdown> `:""},renderShowFormStepHeader:(e,t)=>e.localize(`component.${t.handler}.config.step.${t.step_id}.title`,t.description_placeholders)||e.localize(`component.${t.handler}.title`),renderShowFormStepDescription(e,t){const o=e.localize(`component.${t.handler}.config.step.${t.step_id}.description`,t.description_placeholders);return o?i.dy` <ha-markdown allowsvg breaks .content="${o}"></ha-markdown> `:""},renderShowFormStepFieldLabel:(e,t,o)=>e.localize(`component.${t.handler}.config.step.${t.step_id}.data.${o.name}`),renderShowFormStepFieldHelper(e,t,o){const n=e.localize(`component.${t.handler}.config.step.${t.step_id}.data_description.${o.name}`,t.description_placeholders);return n?i.dy`<ha-markdown breaks .content="${n}"></ha-markdown>`:""},renderShowFormStepFieldError:(e,t,o)=>e.localize(`component.${t.handler}.config.error.${o}`,t.description_placeholders)||o,renderShowFormStepFieldLocalizeValue:(e,t,o)=>e.localize(`component.${t.handler}.selector.${o}`),renderShowFormStepSubmitButton:(e,t)=>e.localize(`component.${t.handler}.config.step.${t.step_id}.submit`)||e.localize("ui.panel.config.integrations.config_flow."+(!1===t.last_step?"next":"submit")),renderExternalStepHeader:(e,t)=>e.localize(`component.${t.handler}.config.step.${t.step_id}.title`)||e.localize("ui.panel.config.integrations.config_flow.external_step.open_site"),renderExternalStepDescription(e,t){const o=e.localize(`component.${t.handler}.config.${t.step_id}.description`,t.description_placeholders);return i.dy` <p> ${e.localize("ui.panel.config.integrations.config_flow.external_step.description")} </p> ${o?i.dy` <ha-markdown allowsvg breaks .content="${o}"></ha-markdown> `:""} `},renderCreateEntryDescription(e,t){const o=e.localize(`component.${t.handler}.config.create_entry.${t.description||"default"}`,t.description_placeholders);return i.dy` ${o?i.dy` <ha-markdown allowsvg breaks .content="${o}"></ha-markdown> `:""} <p> ${e.localize("ui.panel.config.integrations.config_flow.created_config","name",t.title)} </p> `},renderShowFormProgressHeader:(e,t)=>e.localize(`component.${t.handler}.config.step.${t.step_id}.title`)||e.localize(`component.${t.handler}.title`),renderShowFormProgressDescription(e,t){const o=e.localize(`component.${t.handler}.config.progress.${t.progress_action}`,t.description_placeholders);return o?i.dy` <ha-markdown allowsvg breaks .content="${o}"></ha-markdown> `:""},renderMenuHeader:(e,t)=>e.localize(`component.${t.handler}.config.step.${t.step_id}.title`)||e.localize(`component.${t.handler}.title`),renderMenuDescription(e,t){const o=e.localize(`component.${t.handler}.config.step.${t.step_id}.description`,t.description_placeholders);return o?i.dy` <ha-markdown allowsvg breaks .content="${o}"></ha-markdown> `:""},renderMenuOption:(e,t,o)=>e.localize(`component.${t.handler}.config.step.${t.step_id}.menu_options.${o}`,t.description_placeholders),renderLoadingDescription(e,t,o,i){if("loading_flow"!==t&&"loading_step"!==t)return"";const n=(null==i?void 0:i.handler)||o;return e.localize(`ui.panel.config.integrations.config_flow.loading.${t}`,{integration:n?(0,a.Lh)(e.localize,n):e.localize("ui.panel.config.integrations.config_flow.loading.fallback_title")})}})},52871:(e,t,o)=>{o.d(t,{G:()=>n,w:()=>a});var i=o(47181);const n=()=>Promise.all([o.e(46992),o.e(31338),o.e(42977),o.e(28597),o.e(2185),o.e(7270),o.e(52154),o.e(91801),o.e(59159)]).then(o.bind(o,59159)),a=(e,t,o)=>{(0,i.B)(e,"show-dialog",{dialogTag:"dialog-data-entry-flow",dialogImport:n,dialogParams:{...t,flowConfig:o,dialogParentElement:e}})}},73826:(e,t,o)=>{o.d(t,{f:()=>s});var i=o(17463),n=o(34541),a=o(47838),r=o(79932);const s=e=>(0,i.Z)(null,(function(e,t){class o extends t{constructor(...t){super(...t),e(this)}}return{F:o,d:[{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:void 0},{kind:"field",key:"__unsubs",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,n.Z)((0,a.Z)(o.prototype),"connectedCallback",this).call(this),this.__checkSubscribed()}},{kind:"method",key:"disconnectedCallback",value:function(){if((0,n.Z)((0,a.Z)(o.prototype),"disconnectedCallback",this).call(this),this.__unsubs){for(;this.__unsubs.length;){const e=this.__unsubs.pop();e instanceof Promise?e.then((e=>e())):e()}this.__unsubs=void 0}}},{kind:"method",key:"updated",value:function(e){if((0,n.Z)((0,a.Z)(o.prototype),"updated",this).call(this,e),e.has("hass"))this.__checkSubscribed();else if(this.hassSubscribeRequiredHostProps)for(const t of e.keys())if(this.hassSubscribeRequiredHostProps.includes(t))return void this.__checkSubscribed()}},{kind:"method",key:"hassSubscribe",value:function(){return[]}},{kind:"method",key:"__checkSubscribed",value:function(){var e;void 0!==this.__unsubs||!this.isConnected||void 0===this.hass||null!==(e=this.hassSubscribeRequiredHostProps)&&void 0!==e&&e.some((e=>void 0===this[e]))||(this.__unsubs=this.hassSubscribe())}}]}}),e)},76622:(e,t,o)=>{o.r(t);var i=o(17463),n=o(34541),a=o(47838),r=(o(14271),o(68144)),s=o(79932),d=o(7323),l=o(47181),c=o(85415),h=o(81582),p=o(73728),u=o(5986);var g=o(2852),f=o(73826),b=o(72160);o(52039);(0,i.Z)([(0,s.Mo)("action-badge")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,s.Cb)()],key:"icon",value:void 0},{kind:"field",decorators:[(0,s.Cb)()],key:"title",value:void 0},{kind:"field",decorators:[(0,s.Cb)()],key:"badgeIcon",value:void 0},{kind:"field",decorators:[(0,s.Cb)({type:Boolean,reflect:!0})],key:"clickable",value:()=>!1},{kind:"method",key:"render",value:function(){return r.dy` <div class="icon"> <ha-svg-icon .path="${this.icon}"></ha-svg-icon> ${this.badgeIcon?r.dy`<ha-svg-icon class="badge" .path="${this.badgeIcon}"></ha-svg-icon>`:""} </div> <div class="title">${this.title}</div> `}},{kind:"get",static:!0,key:"styles",value:function(){return r.iv`:host{display:inline-flex;flex-direction:column;text-align:center;color:var(--primary-text-color)}:host([clickable]){color:var(--primary-text-color)}.icon{position:relative;box-sizing:border-box;margin:0 auto 8px;height:40px;width:40px;border-radius:50%;border:1px solid var(--secondary-text-color);display:flex;align-items:center;justify-content:center}:host([clickable]) .icon{border-color:var(--primary-color);border-width:2px}.badge{position:absolute;color:var(--primary-color);bottom:-5px;right:-5px;background-color:#fff;border-radius:50%;width:18px;display:block;height:18px}.title{min-height:2.3em;word-break:break-word}`}}]}}),r.oi);var m=o(11254);(0,i.Z)([(0,s.Mo)("integration-badge")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,s.Cb)()],key:"domain",value:void 0},{kind:"field",decorators:[(0,s.Cb)()],key:"title",value:void 0},{kind:"field",decorators:[(0,s.Cb)()],key:"badgeIcon",value:void 0},{kind:"field",decorators:[(0,s.Cb)({type:Boolean})],key:"darkOptimizedIcon",value:void 0},{kind:"field",decorators:[(0,s.Cb)({type:Boolean,reflect:!0})],key:"clickable",value:()=>!1},{kind:"method",key:"render",value:function(){return r.dy` <div class="icon"> <img alt="" src="${(0,m.X1)({domain:this.domain,type:"icon",darkOptimized:this.darkOptimizedIcon})}" referrerpolicy="no-referrer"> ${this.badgeIcon?r.dy`<ha-svg-icon class="badge" .path="${this.badgeIcon}"></ha-svg-icon>`:""} </div> <div class="title">${this.title}</div> `}},{kind:"get",static:!0,key:"styles",value:function(){return r.iv`:host{display:inline-flex;flex-direction:column;text-align:center;color:var(--primary-text-color)}:host([clickable]){color:var(--primary-text-color)}img{max-width:100%;max-height:100%}.icon{position:relative;margin:0 auto 8px;height:40px;width:40px;display:flex;align-items:center;justify-content:center}.badge{position:absolute;color:#fff;bottom:-7px;right:-10px;background-color:var(--label-badge-green);border-radius:50%;display:block;--mdc-icon-size:18px;border:2px solid #fff}.title{min-height:2.3em;word-break:break-word}`}}]}}),r.oi);const k=new Set(["hassio","met","radio_browser","rpi_power","sun"]);(0,i.Z)([(0,s.Mo)("onboarding-integrations")],(function(e,t){class o extends t{constructor(...t){super(...t),e(this)}}return{F:o,d:[{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.Cb)()],key:"onboardingLocalize",value:void 0},{kind:"field",decorators:[(0,s.SB)()],key:"_entries",value:()=>[]},{kind:"field",decorators:[(0,s.SB)()],key:"_discovered",value:void 0},{kind:"method",key:"hassSubscribe",value:function(){return[(0,p.V3)(this.hass,(e=>{this._discovered=e;const t=new Set;for(const o of e)o.context.title_placeholders&&t.add(o.handler);this.hass.loadBackendTranslation("config",Array.from(t))})),(0,h.DJ)(this.hass,(e=>{let t=!1;const o=[];if(e.forEach((e=>{if(null===e.type||"added"===e.type){if(k.has(e.entry.domain))return;o.push(e.entry),null===e.type&&(t=!0)}else if("removed"===e.type)this._entries=this._entries.filter((t=>t.entry_id!==e.entry.entry_id));else if("updated"===e.type){if(k.has(e.entry.domain))return;const t=e.entry;this._entries=this._entries.map((e=>e.entry_id===t.entry_id?t:e))}})),!o.length&&!t)return;const i=t?[]:this._entries;this._entries=[...i,...o]}),{type:["device","hub","service"]})]}},{kind:"method",key:"render",value:function(){if(!this._discovered)return r.Ld;const e=[...this._entries.map((e=>{var t;const o=e.title||(0,u.Lh)(this.hass.localize,e.domain)||e.domain;return[o,r.dy` <integration-badge .domain="${e.domain}" .title="${o}" .badgeIcon="${"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}" .darkOptimizedIcon="${null===(t=this.hass.themes)||void 0===t?void 0:t.darkMode}"></integration-badge> `]})),...this._discovered.map((e=>{var t;const o=(0,p.WW)(this.hass.localize,e);return[o,r.dy` <button .flowId="${e.flow_id}" @click="${this._continueFlow}"> <integration-badge clickable .domain="${e.handler}" .title="${o}" .darkOptimizedIcon="${null===(t=this.hass.themes)||void 0===t?void 0:t.darkMode}"></integration-badge> </button> `]}))].sort(((e,t)=>(0,c.$)(e[0],t[0],this.hass.locale.language))).map((e=>e[1]));return r.dy` <p> ${this.onboardingLocalize("ui.panel.page-onboarding.integration.intro")} </p> <div class="badges"> ${e} <button @click="${this._createFlow}"> <action-badge clickable title="${this.onboardingLocalize("ui.panel.page-onboarding.integration.more_integrations")}" .icon="${"M16,12A2,2 0 0,1 18,10A2,2 0 0,1 20,12A2,2 0 0,1 18,14A2,2 0 0,1 16,12M10,12A2,2 0 0,1 12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12M4,12A2,2 0 0,1 6,10A2,2 0 0,1 8,12A2,2 0 0,1 6,14A2,2 0 0,1 4,12Z"}"></action-badge> </button> </div> <div class="footer"> <mwc-button @click="${this._finish}"> ${this.onboardingLocalize("ui.panel.page-onboarding.integration.finish")} </mwc-button> </div> `}},{kind:"method",key:"firstUpdated",value:function(e){(0,n.Z)((0,a.Z)(o.prototype),"firstUpdated",this).call(this,e),this.hass.loadBackendTranslation("title",void 0,!0),this._scanUSBDevices(),(0,g.q)()}},{kind:"method",key:"_createFlow",value:function(){(0,b.E)(this)}},{kind:"method",key:"_continueFlow",value:function(e){(0,g.t)(this,{continueFlowId:e.currentTarget.flowId,dialogClosedCallback:()=>{(0,p.ZJ)(this.hass.connection).refresh()}})}},{kind:"method",key:"_scanUSBDevices",value:async function(){var e;(0,d.p)(this.hass,"usb")&&await(e=this.hass,e.callWS({type:"usb/scan"}))}},{kind:"method",key:"_finish",value:async function(){(0,l.B)(this,"onboarding-step",{type:"integration"})}},{kind:"get",static:!0,key:"styles",value:function(){return r.iv`.badges{margin-top:24px;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start;align-items:flex-start}.badges>*{width:96px;margin-bottom:24px}button{cursor:pointer;padding:0;border:0;background:0;font:inherit}.footer{text-align:right}`}}]}}),(0,f.f)(r.oi))},72160:(e,t,o)=>{o.d(t,{E:()=>n,u:()=>a});var i=o(47181);const n=(e,t)=>{(0,i.B)(e,"show-dialog",{dialogTag:"dialog-add-integration",dialogImport:()=>Promise.all([o.e(46992),o.e(31338),o.e(42977),o.e(63436),o.e(28597),o.e(52154),o.e(81480),o.e(75814)]).then(o.bind(o,92205)),dialogParams:t})},a=(e,t)=>{(0,i.B)(e,"show-dialog",{dialogTag:"dialog-yaml-integration",dialogImport:()=>o.e(64348).then(o.bind(o,64348)),dialogParams:t})}},11254:(e,t,o)=>{o.d(t,{X1:()=>i,u4:()=>n,zC:()=>a});const i=e=>`https://brands.home-assistant.io/${e.brand?"brands/":""}${e.useFallback?"_/":""}${e.domain}/${e.darkOptimized?"dark_":""}${e.type}.png`,n=e=>e.split("/")[4],a=e=>e.startsWith("https://brands.home-assistant.io/")}}]);
//# sourceMappingURL=76622-p5wP3cT7K4E.js.map