Metadata-Version: 2.1
Name: chromadb-semantic
Version: 1.0.2
Description-Content-Type: text/markdown

# ChromaDB Semantic Search
```
ğŸ”å‹•æ©Ÿ: ã€Œèªå¢ƒæ¢ç´¢ã€æ•£äº‚çš„ .pt æª”æ¡ˆå‡ç´šç‚º duckdb+parquet å‘é‡è³‡æ–™åº«ï¼Œä¸¦åŠ å…¥é«˜é€Ÿç´¢å¼•
ğŸ’£åœ°é›·: python 3.11ç„¡æ³•ç·¨è­¯é€šé, python 3.10æ¸¬è©¦æˆåŠŸ
æœ¬å°ˆæ¡ˆä½¿ç”¨ [ChromaDB](https://github.com/chroma-core/chroma) ä»¥åŠ [Sentence Transformers](https://github.com/UKPLab/sentence-transformers) ä¾†å¯¦ç¾ä¸­æ–‡èˆ‡è‹±æ–‡çš„èªæ„æœå°‹ã€‚è«‹æŒ‰ç…§ä»¥ä¸‹çš„æ­¥é©Ÿé€²è¡Œå®‰è£å’Œä½¿ç”¨ã€‚
```

## å®‰è£
1. å…ˆç¢ºä¿æ‚¨å·²å®‰è£ Python 3.10ã€‚
2. é‹è¡Œä»¥ä¸‹æŒ‡ä»¤å®‰è£å¿…è¦çš„å¥—ä»¶ï¼š

```bash
python -m pip install chromadb-semantic
```

## ä½¿ç”¨æ–¹æ³•
1. å°‡ `chromadb_semantic.py` æª”æ¡ˆæ”¾å…¥ä½ çš„å°ˆæ¡ˆè³‡æ–™å¤¾ä¸­ã€‚
2. åœ¨ä½ çš„å°ˆæ¡ˆä¸­å¼•å…¥ `chromadb_semantic.py` ä¸¦ä½¿ç”¨ä»¥ä¸‹å‡½å¼ï¼š

### `create_chromadb_client()`
å»ºç«‹ä¸€å€‹ ChromaDB å®¢æˆ¶ç«¯ï¼Œè³‡æ–™æœƒå„²å­˜åœ¨ `./data` è³‡æ–™å¤¾ä¸­ã€‚

### `create_collection(client, collection_name)`
- `client`: éœ€è¦å‚³å…¥ç”± `create_chromadb_client()` è¿”å›çš„å®¢æˆ¶ç«¯ç‰©ä»¶ã€‚
- `collection_name`: ä½¿ç”¨æ‚¨å¸Œæœ›å»ºç«‹çš„é›†åˆåç¨±ã€‚
å»ºç«‹ä¸€å€‹æ–°çš„èªæ„æœå°‹é›†åˆã€‚

### `add_documents_to_collection(collection, documents, metadatas, ids)`
- `collection`: éœ€è¦å‚³å…¥ç”± `create_collection()` è¿”å›çš„é›†åˆç‰©ä»¶ã€‚
- `documents`: æ–‡æª”åˆ—è¡¨ï¼Œå…§å®¹å¯ä»¥æ˜¯ä¸­è‹±æ–‡ï¼Œå¿…é ˆèˆ‡ `metadatas` å’Œ `ids` ä¸€ä¸€å°æ‡‰ã€‚
- `metadatas`: å…ƒæ•¸æ“šåˆ—è¡¨ã€‚
- `ids`: æ–‡æª”æ¨™è­˜åˆ—è¡¨ã€‚
å‘é›†åˆä¸­æ·»åŠ æ–‡æª”ã€‚

### `query_collection(collection, query_text, n_results)`
- `collection`: éœ€è¦å‚³å…¥ç”± `create_collection()` è¿”å›çš„é›†åˆç‰©ä»¶ã€‚
- `query_text`: æŸ¥è©¢èªå¥ã€‚
- `n_results`: å¾æ­¤æŸ¥è©¢ä¸­è¦è¿”å›çš„çµæœæ•¸ã€‚
é€šéæŸ¥è©¢èªå¥ï¼Œåœ¨é›†åˆä¸­åŸ·è¡Œèªæ„æœç´¢ã€‚

## ç¤ºä¾‹
ä»¥ä¸‹æ˜¯ä¸€å€‹ä½¿ç”¨ `chromadb_semantic.py` çš„ç¯„ä¾‹ï¼š

```python
from chromadb_semantic import *

client = create_chromadb_client()

collection_name = "my_sentence_transformer_collection"
collection = create_collection(client, collection_name)

documents = ["This is a sample document.", "ç‰é‡Œé®çš„æœˆäº®æ¯”è¼ƒå¤§é¡†", "This is a test document."]
ids = ["doc1", "doc2", "doc3"]
metadatas = [{"type": "sample"}, {"type": "example"}, {"type": "test"}]

add_documents_to_collection(collection, documents, metadatas, ids)

query_text = "å“ªä¸€å€‹é„‰é®çš„æœˆäº®æ¯”è¼ƒåœ“"
results = query_collection(collection, query_text, n_results=2)

print(f"Results for query: {query_text}")
print(results)
```

è¼¸å‡ºç¤ºä¾‹ï¼š
```
Results for query: å“ªä¸€å€‹é„‰é®çš„æœˆäº®æ¯”è¼ƒåœ“
{'ids': [['doc2', 'doc1']], 'embeddings': None, 'documents': [['ç‰é‡Œé®çš„æœˆäº®æ¯”è¼ƒå¤§é¡†', 'This is a sample docummetadatas': [[{'type': 'example'}, {'type': 'sample'}]], 'distances': [[5.628111839294434, 43.863502502441406]]}
```

æ³¨æ„ï¼šç¬¬ä¸€æ¬¡å‰µå»ºé›†åˆå’Œæ·»åŠ æ–‡æª”æ™‚ï¼ŒåµŒå…¥é‹ç®—å¯èƒ½éœ€è¦ä¸€äº›æ™‚é–“ã€‚ä¹‹å¾Œçš„æŸ¥è©¢å°‡æœƒæ›´å¿«ã€‚
