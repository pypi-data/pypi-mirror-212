(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[500],{1575:function(e,t,i){"use strict";i.d(t,{b:function(){return o}});var l=i(5893),a=i(5675),n=i.n(a),r=i(7294);class s{width(){return this.xmax-this.xmin}height(){return this.ymax-this.ymin}constructor(e,t,i,l,a,n){this.xmin=e,this.ymin=t,this.xmax=i,this.ymax=l,this.color=a,this.label=n}}let u=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf","#0000FF","#00FF00","#FF0000","#00FFFF","#FF00FF","#FFFF00","#C0C0C0","#800000"];function o(e){let[t,i]=(0,r.useState)([]),[a,o]=(0,r.useState)({width:0,height:0,naturalWidth:0,naturalHeight:0}),[d,h]=(0,r.useState)([]),c=r.useRef(null);(0,r.useEffect)(()=>{if(null!=e.media.information&&null!=e.boundingBoxColumnIndex){let t=e.media.information[e.boundingBoxColumnIndex];if(null==t)return;let l=function(e){let t=JSON.parse(e),i=[];return t.forEach(e=>{let t=e.xmin,l=e.ymin,a=e.xmax,n=e.ymax;isNaN(t)||isNaN(l)||isNaN(a)||isNaN(n)||i.push(new s(t,l,a,n,e.color,e.label))}),i}(t);i(l)}},[e.media,e.boundingBoxColumnIndex]),r.useEffect(()=>{if(c.current){let t=c.current,i=t.offsetWidth,l=t.offsetHeight;if(1===e.columns){let e=function(e){let t=e.naturalWidth/e.naturalHeight,i=e.height*t,l=e.height;return i>e.width&&(i=e.width,l=e.width/t),{width:i,height:l}}(c.current);i=e.width,l=e.height}o({height:isNaN(l)?0:l,naturalWidth:isNaN(t.naturalWidth)?0:t.naturalWidth,naturalHeight:isNaN(t.naturalHeight)?0:t.naturalHeight,width:isNaN(i)?0:i})}},[e.media,e.columns,e.displayLabel]),(0,r.useEffect)(()=>{f()},[a]);let f=()=>{if(isNaN(a.width)||isNaN(a.height)||isNaN(a.naturalWidth)||isNaN(a.naturalHeight)||0===a.width||0===a.height||0===a.naturalHeight||0===a.naturalWidth)return;let i=t.map((t,i)=>{let{textLabel:n,rect:s,textRectangle:o}=function(t,i){let n;let r=(0,l.jsx)("rect",{x:i.xmin/a.naturalWidth*a.width,y:i.ymin/a.naturalHeight*a.height,width:(i.xmax-i.xmin)/a.naturalWidth*a.width,height:(i.ymax-i.ymin)/a.naturalHeight*a.height,stroke:null!=i.color?i.color:u[t%u.length],strokeWidth:"3",fill:"none"},t),s=(0,l.jsx)("rect",{x:i.xmin/a.naturalWidth*a.width,y:i.ymin/a.naturalHeight*a.height,width:(i.xmax-i.xmin)/a.naturalWidth*a.width,height:12,fill:null!=i.color?i.color:u[t%u.length]});return null!=i.label&&e.displayLabel&&(n=(0,l.jsx)("text",{x:i.xmin/a.naturalWidth*a.width+2,y:i.ymin/a.naturalHeight*a.height+10,fill:"white",className:"small",children:i.label})),{textLabel:n,rect:r,textRectangle:s}}(i,t);return(0,l.jsxs)(r.Fragment,{children:[s,null!=n?o:"",null!=n?n:""]},i)});h(i)};return(0,l.jsxs)("div",{className:"image--preview",children:[(0,l.jsx)(n(),{src:e.media.src,className:"sidebar-image",alt:"preview",ref:c,width:"0",height:"0",sizes:" ",style:{width:"auto",height:"auto"}},e.media.src),null==e.boundingBoxColumnIndex&&void 0!==e.boundingBoxColumnIndex&&(0,l.jsx)("svg",{className:"sidebar-svg",width:a.width,height:a.height,children:d})]})}},5703:function(e,t,i){"use strict";i.d(t,{Z:function(){return n}});var l=i(5893);i(7294);var a=i(1575);function n(e){var t;let{media:i,columns:n,boundingBoxColumn:r}=e;return(0,l.jsxs)("div",{className:"sidebar text-dark",style:{display:"flex",flexDirection:"column",maxHeight:"calc(70vh - 35px)"},children:[(0,l.jsx)("div",{style:{maxHeight:"300px"},children:(0,l.jsx)(a.b,{media:i,boundingBoxColumnIndex:null!=r?n.indexOf(r):void 0,displayLabel:!0})}),(0,l.jsx)("div",{style:{overflowY:"scroll",flexGrow:1},children:null===(t=i.information)||void 0===t?void 0:t.filter((e,t)=>t!==(null!=r?n.indexOf(r):-1)).map((e,t)=>{var i;return i=n.slice(2),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"border-bottom",children:(0,l.jsx)("small",{children:i[t]})}),(0,l.jsx)("div",{children:e})]},t)})})]})}},5670:function(e,t,i){"use strict";i.d(t,{T:function(){return l}});let l="";l=""},5677:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){let i=n.default,a={loading:e=>{let{error:t,isLoading:i,pastDelay:l}=e;return null}};e instanceof Promise?a.loader=()=>e:"function"==typeof e?a.loader=e:"object"==typeof e&&(a=l({},a,e)),a=l({},a,t);let u=a.loader,o=()=>null!=u?u().then(r):Promise.resolve(r(()=>null));return(a.loadableGenerated&&(a=l({},a,a.loadableGenerated),delete a.loadableGenerated),"boolean"!=typeof a.ssr||a.ssr)?i(l({},a,{loader:o})):(delete a.webpack,delete a.modules,s(i,a))},t.noSSR=s;var l=i(6495).Z,a=i(2648).Z,n=(a(i(7294)),a(i(8976)));function r(e){return{default:(null==e?void 0:e.default)||e}}function s(e,t){return delete t.webpack,delete t.modules,e(t)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2254:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadableContext=void 0;var l=(0,i(2648).Z)(i(7294));let a=l.default.createContext(null);t.LoadableContext=a},8976:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=i(6495).Z,a=(0,i(2648).Z)(i(7294)),n=i(2254);let r=[],s=[],u=!1;function o(e){let t=e(),i={loading:!0,loaded:null,error:null};return i.promise=t.then(e=>(i.loading=!1,i.loaded=e,e)).catch(e=>{throw i.loading=!1,i.error=e,e}),i}class d{promise(){return this._res.promise}retry(){this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};let{_res:e,_opts:t}=this;e.loading&&("number"==typeof t.delay&&(0===t.delay?this._state.pastDelay=!0:this._delay=setTimeout(()=>{this._update({pastDelay:!0})},t.delay)),"number"==typeof t.timeout&&(this._timeout=setTimeout(()=>{this._update({timedOut:!0})},t.timeout))),this._res.promise.then(()=>{this._update({}),this._clearTimeouts()}).catch(e=>{this._update({}),this._clearTimeouts()}),this._update({})}_update(e){this._state=l({},this._state,{error:this._res.error,loaded:this._res.loaded,loading:this._res.loading},e),this._callbacks.forEach(e=>e())}_clearTimeouts(){clearTimeout(this._delay),clearTimeout(this._timeout)}getCurrentValue(){return this._state}subscribe(e){return this._callbacks.add(e),()=>{this._callbacks.delete(e)}}constructor(e,t){this._loadFn=e,this._opts=t,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}}function h(e){return function(e,t){let i=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null},t),l=null;function r(){if(!l){let t=new d(e,i);l={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return l.promise()}if(!u){let e=i.webpack?i.webpack():i.modules;e&&s.push(t=>{for(let i of e)if(-1!==t.indexOf(i))return r()})}function o(e,t){!function(){r();let e=a.default.useContext(n.LoadableContext);e&&Array.isArray(i.modules)&&i.modules.forEach(t=>{e(t)})}();let s=a.default.useSyncExternalStore(l.subscribe,l.getCurrentValue,l.getCurrentValue);return a.default.useImperativeHandle(t,()=>({retry:l.retry}),[]),a.default.useMemo(()=>{var t;return s.loading||s.error?a.default.createElement(i.loading,{isLoading:s.loading,pastDelay:s.pastDelay,timedOut:s.timedOut,error:s.error,retry:l.retry}):s.loaded?a.default.createElement((t=s.loaded)&&t.default?t.default:t,e):null},[e,s])}return o.preload=()=>r(),o.displayName="LoadableComponent",a.default.forwardRef(o)}(o,e)}function c(e,t){let i=[];for(;e.length;){let l=e.pop();i.push(l(t))}return Promise.all(i).then(()=>{if(e.length)return c(e,t)})}h.preloadAll=()=>new Promise((e,t)=>{c(r).then(e,t)}),h.preloadReady=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise(t=>{let i=()=>(u=!0,t());c(s,e).then(i,i)})},window.__NEXT_PRELOADREADY=h.preloadReady,t.default=h},4186:function(e,t,i){"use strict";i.d(t,{o:function(){return r}});var l=i(6154);class a{constructor(e,t,i,l,a){this.index=e,this.src=t,this.information=i,this.height=l,this.width=a}}var n=i(5670);async function r(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return await l.Z.get("".concat(n.T,"/views/").concat(e,"/media/").concat(t,"?&as_base64=").concat(i.toString())).then(e=>new a(e.data.index,e.data.src,e.data.information,e.data.height,e.data.width))}},5152:function(e,t,i){e.exports=i(5677)}}]);