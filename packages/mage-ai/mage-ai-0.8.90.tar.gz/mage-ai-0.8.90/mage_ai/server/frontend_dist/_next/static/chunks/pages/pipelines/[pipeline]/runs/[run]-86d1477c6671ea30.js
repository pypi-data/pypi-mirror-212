(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8662],{27125:function(e,n,t){"use strict";var i=t(82684),r=t(12691),o=t.n(r),u=t(34376),l=t.n(u),c=t(9518),s=t(66050),a=t(60328),d=t(16634),p=t(10919),f=t(98781),v=t(86673),b=t(58180),h=t(19711),g=t(10503),j=t(49125),O=t(44162),m=t(24224),x=t(28598);n.Z=function(e){var n=e.blockRuns,t=e.onClickRow,r=e.pipeline,u=e.selectedRun,y=(0,i.useContext)(c.ThemeContext),Z=(r||{}).uuid,P=(0,i.useMemo)((function(){return r.blocks||[]}),[r]),_=(0,i.useMemo)((function(){return(0,m.HK)(P,(function(e){return e.uuid}))}),[P]);return(0,x.jsx)(b.Z,{columnFlex:[null,1,3,2,null,null],columns:[{uuid:"Date"},{uuid:"Status"},{uuid:"Trigger"},{uuid:"Block"},{uuid:"Completed"},{uuid:"Logs"}],isSelectedRow:function(e){return n[e].id===(null===u||void 0===u?void 0:u.id)},onClickRow:t,rows:null===n||void 0===n?void 0:n.map((function(e){var n,t,i,u,c=e.block_uuid,b=e.completed_at,m=e.created_at,P=e.id,w=e.pipeline_schedule_id,k=e.pipeline_schedule_name,D=e.status,E=c,T=E.split(":");f.qL.INTEGRATION===r.type&&(E=T[0],i=T[1],u=T[2]);var I=_[E];return I||(I=_[T[0]]),[(0,x.jsx)(h.ZP,{monospace:!0,default:!0,children:m}),(0,x.jsx)(h.ZP,{danger:s.V.FAILED===D,default:s.V.CANCELLED===D,info:s.V.INITIAL===D,monospace:!0,success:s.V.COMPLETED===D,warning:s.V.RUNNING===D,children:D}),(0,x.jsx)(o(),{as:"/pipelines/".concat(Z,"/triggers/").concat(w),href:"/pipelines/[pipeline]/triggers/[...slug]",passHref:!0,children:(0,x.jsx)(p.Z,{bold:!0,sameColorAsText:!0,children:k})}),(0,x.jsx)(o(),{as:"/pipelines/".concat(Z,"/edit?block_uuid=").concat(E),href:"/pipelines/[pipeline]/edit",passHref:!0,children:(0,x.jsxs)(p.Z,{bold:!0,sameColorAsText:!0,verticalAlignContent:!0,children:[(0,x.jsx)(d.Z,{color:(0,O.qn)(null===(n=I)||void 0===n?void 0:n.type,{blockColor:null===(t=I)||void 0===t?void 0:t.color,theme:y}).accent,size:1.5*j.iI,square:!0}),(0,x.jsx)(v.Z,{mr:1}),(0,x.jsxs)(h.ZP,{monospace:!0,children:[E,i&&": ",i&&(0,x.jsx)(h.ZP,{default:!0,inline:!0,monospace:!0,children:i}),u>=0&&": ",u>=0&&(0,x.jsx)(h.ZP,{default:!0,inline:!0,monospace:!0,children:u})]})]})}),(0,x.jsx)(h.ZP,{monospace:!0,default:!0,children:b||"-"}),(0,x.jsx)(a.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return l().push("/pipelines/".concat(Z,"/logs?block_run_id[]=").concat(P))},children:(0,x.jsx)(g.B4,{default:!0,size:2*j.iI})})]})),uuid:"block-runs"})}},56681:function(e,n,t){"use strict";t.d(n,{G7:function(){return y},ZP:function(){return Z},u$:function(){return O}});var i=t(75582),r=t(82394),o=t(26304),u=t(32316),l=t(22673),c=t(73752),s=t(86673),a=t(19711),d=t(58180),p=t(49125),f=t(19395),v=t(7715),b=t(28598),h=["height","heightOffset","pipeline","selectedRun","selectedTab","setSelectedTab"];function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function j(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var O=76,m={uuid:"Run details"},x={uuid:"Dependency tree"},y=[x,m];function Z(e){var n=e.height,t=e.heightOffset,r=e.pipeline,g=e.selectedRun,Z=e.selectedTab,P=e.setSelectedTab,_=j({},(0,o.Z)(e,h));g?_.blockStatus=(0,f.IJ)(null===g||void 0===g?void 0:g.block_runs):_.noStatus=!0;var w=(0,v.Kn)(null===g||void 0===g?void 0:g.variables)?j({},null===g||void 0===g?void 0:g.variables):(null===g||void 0===g?void 0:g.variables)||{},k=null===g||void 0===g?void 0:g.event_variables;if(k&&(0,v.Kn)(k)&&!(0,v.Qr)(k))if((0,v.Kn)(w)&&w.hasOwnProperty("event")){var D=(0,v.Kn)(w.event)?w.event:{};w.event=j(j({},D),k)}else w.event=j({},k);var E=[];w&&JSON.stringify(w,null,2).split("\n").forEach((function(e){E.push("    ".concat(e))}));var T=g&&[["Run ID",null===g||void 0===g?void 0:g.id],["Variables",(0,b.jsx)(l.Z,{language:"json",small:!0,source:E.join("\n")},"variable_value")]],I=g&&(0,b.jsx)(s.Z,{pb:p.cd,px:p.cd,children:(0,b.jsx)(d.Z,{alignTop:!0,columnFlex:[null,1],columnMaxWidth:function(e){return 1===e?"100px":null},rows:T.map((function(e,n){var t=(0,i.Z)(e,2),r=t[0],o=t[1];return[(0,b.jsx)(a.ZP,{monospace:!0,muted:!0,children:r},"key_".concat(n)),(0,b.jsx)(a.ZP,{monospace:!0,textOverflow:!0,children:o},"val_".concat(n))]})),uuid:"LogDetail"})}),C=Z&&P;return(0,b.jsxs)(b.Fragment,{children:[C&&(0,b.jsx)(s.Z,{py:p.cd,children:(0,b.jsx)(u.Z,{onClickTab:P,selectedTabUUID:null===Z||void 0===Z?void 0:Z.uuid,tabs:y})}),(!C||x.uuid===(null===Z||void 0===Z?void 0:Z.uuid))&&(0,b.jsx)(c.Z,j(j({},_),{},{height:n,heightOffset:(t||0)+(C?O:0),pipeline:r})),m.uuid===(null===Z||void 0===Z?void 0:Z.uuid)&&I]})}},64155:function(e,n,t){"use strict";t.d(n,{Eh:function(){return s},ht:function(){return d},t0:function(){return a}});var i=t(9518),r=t(82386),o=t(1286),u=t(31012),l=t(37391),c=t(49125),s=(c.iI,o.O$+3*c.iI+u.dN),a=i.default.div.withConfig({displayName:"indexstyle__SidekickContainerStyle",componentId:"sc-15ofupc-0"})([""," overflow:auto;position:absolute;width:100%;",""],l.w5,(function(e){return"\n    height: calc(100vh - ".concat(r.uX,"px - ").concat(e.heightOffset,"px);\n  ")})),d=i.default.div.withConfig({displayName:"indexstyle__PaddingContainerStyle",componentId:"sc-15ofupc-1"})(["padding:","px;",""],2*c.iI,(function(e){return e.noPadding&&"\n    padding: 0;\n  "}))},19395:function(e,n,t){"use strict";t.d(n,{IJ:function(){return a},Vx:function(){return p},eI:function(){return d},gU:function(){return v},tL:function(){return f},vJ:function(){return b}});var i,r,o=t(82394),u=t(92083),l=t.n(u);function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function a(e){return null===e||void 0===e?void 0:e.reduce((function(e,n){var t=n.block_uuid,i=n.completed_at,r=n.started_at,u=n.status,c=null;r&&i&&(c=l()(i).valueOf()-l()(r).valueOf());return s(s({},e),{},(0,o.Z)({},t,{runtime:c,status:u}))}),{})}function d(e){if(!e)return null;var n=new Date(l()(e).valueOf()),t=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds());return new Date(t)}function p(e){return"string"!==typeof e?e:d(e.split("+")[0]).toISOString().split(".")[0]}!function(e){e.DAY="day",e.HOUR="hour",e.MINUTE="minute",e.SECOND="second"}(r||(r={}));var f=(i={},(0,o.Z)(i,r.DAY,86400),(0,o.Z)(i,r.HOUR,3600),(0,o.Z)(i,r.MINUTE,60),(0,o.Z)(i,r.SECOND,1),i);function v(e){var n=r.SECOND,t=e;return e%86400===0?(t/=86400,n=r.DAY):e%3600===0?(t/=3600,n=r.HOUR):e%60===0&&(t/=60,n=r.MINUTE),{time:t,unit:n}}function b(e,n){return e*f[n]}},47409:function(e,n,t){"use strict";t.d(n,{Az:function(){return l},BF:function(){return u},Do:function(){return s},VO:function(){return o},sZ:function(){return c}});var i,r=t(82394),o=t(66050).V,u=[o.INITIAL,o.RUNNING],l=[o.CANCELLED,o.COMPLETED,o.FAILED],c="__mage_variables",s=(i={},(0,r.Z)(i,o.CANCELLED,"Cancelled"),(0,r.Z)(i,o.COMPLETED,"Done"),(0,r.Z)(i,o.FAILED,"Failed"),(0,r.Z)(i,o.INITIAL,"Ready"),(0,r.Z)(i,o.RUNNING,"Running"),i)},22673:function(e,n,t){"use strict";var i=t(82684),r=t(68792),o=t(31811),u=t(9518),l=t(65292),c=t(23831),s=t(2005),a=t(49125),d=t(28598);n.Z=function(e){var n=e.language,t=e.maxWidth,p=e.showLineNumbers,f=e.small,v=e.source,b=e.wrapLines,h=(0,i.useContext)(u.ThemeContext);function g(e){var i=e.value;return(0,d.jsx)(o.Z,{customStyle:{backgroundColor:(h.background||c.Z.background).popup,border:"none",borderRadius:"none",boxShadow:"none",fontFamily:s.Vp,fontSize:f?12:14,marginBottom:0,marginTop:0,maxWidth:t,paddingBottom:2*a.iI,paddingTop:2*a.iI},language:n,lineNumberStyle:{color:(h.content||c.Z.content).muted},showLineNumbers:p,style:l._4,useInlineStyles:!0,wrapLines:b,children:i})}return(0,d.jsx)(r.D,{components:{code:function(e){var n=e.children;return(0,d.jsx)(g,{value:n})}},children:v})}},23588:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return z}});var i=t(77837),r=t(75582),o=t(82394),u=t(38860),l=t.n(u),c=t(82684),s=t(83455),a=t(27125),d=t(60328),p=t(34744),f=t(93461),v=t(67971),b=t(87372),h=t(60547),g=t(47409),j=t(98781),O=t(41788),m=t(86673),x=t(54283),y=t(19711),Z=t(82531),P=t(26304),_=t(32316),w=t(62976),k=t(73752),D=t(82635),E=t(49125),T=t(64155),I=t(56681),C=t(19395),N=t(90211),S=t(28598),R=["blockRuns","columns","dataType","height","heightOffset","loadingData","pipeline","renderColumnHeader","rows","selectedRun","selectedTab","setSelectedTab","textData"];function L(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function A(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?L(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):L(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var M={uuid:"Dependency tree"},U={uuid:"Block output"},B=[U,M];var F=t(59920),H=t(96510),V=t(66653);function G(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function q(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?G(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):G(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function J(e){var n,t=e.pipeline,i=e.pipelineRun,o=(0,c.useState)(null),u=o[0],l=o[1],O=(0,c.useState)(B[0]),L=O[0],G=O[1],J=(0,c.useState)(null),z=J[0],K=J[1],Y=t.uuid,W=Z.ZP.pipelines.detail(Y,{includes_content:!1,includes_outputs:!1},{revalidateOnFocus:!1}).data,X=(0,c.useMemo)((function(){return q(q({},null===W||void 0===W?void 0:W.pipeline),{},{uuid:Y})}),[W,Y]),$=Z.ZP.pipeline_runs.detail(i.id,{},{refreshInterval:3e3,revalidateOnFocus:!0}).data,Q=(0,c.useMemo)((function(){return(null===$||void 0===$?void 0:$.pipeline_run)||{}}),[$]),ee=Q.block_runs,ne=Q.execution_date,te=Q.id,ie=Q.status,re=(0,s.Db)(Z.ZP.pipeline_runs.useUpdate(te),{onSuccess:function(e){return(0,H.wD)(e,{callback:function(){l(null)},onErrorCallback:function(e,n){return K({errors:n,response:e})}})}}),oe=(0,r.Z)(re,2),ue=oe[0],le=oe[1].isLoading,ce=Z.ZP.outputs.block_runs.list(null===u||void 0===u?void 0:u.id),se=ce.data,ae=ce.loading,de=(null===se||void 0===se||null===(n=se.outputs)||void 0===n?void 0:n[0])||{},pe=de.sample_data,fe=de.text_data,ve=de.type;(0,c.useEffect)((function(){u||(null===L||void 0===L?void 0:L.uuid)!==U.uuid||G(M)}),[u,null===L||void 0===L?void 0:L.uuid]);var be=(0,c.useMemo)((function(){return ee||[]}),[Q]),he=((null===pe||void 0===pe?void 0:pe.columns)||[]).slice(0,40),ge=(null===pe||void 0===pe?void 0:pe.rows)||[],je=(0,c.useMemo)((function(){return(0,S.jsx)(a.Z,{blockRuns:be,onClickRow:function(e){l((function(n){var t=be[e],i=(null===n||void 0===n?void 0:n.id)!==t.id?t:null;return i&&G((function(e){return e!==U?U:e})),i}))},pipeline:X,selectedRun:u})}),[be,X,u]),Oe=(null===X||void 0===X?void 0:X.type)!==j.qL.STREAMING&&ie&&ie!==g.VO.COMPLETED,me=((null===X||void 0===X?void 0:X.type)===j.qL.PYTHON||(null===X||void 0===X?void 0:X.type)===j.qL.INTEGRATION)&&u&&g.Az.includes(ie);return(0,S.jsxs)(h.Z,{breadcrumbs:[{label:function(){return"Runs"},linkProps:{as:"/pipelines/".concat(Y,"/runs"),href:"/pipelines/[pipeline]/runs"}},{label:function(){return ne}}],buildSidekick:function(e){return function(e){var n=e.blockRuns,t=e.columns,i=e.dataType,r=e.height,o=e.heightOffset,u=e.loadingData,l=e.pipeline,c=e.renderColumnHeader,s=e.rows,a=e.selectedRun,d=e.selectedTab,p=e.setSelectedTab,f=e.textData,b=A({},(0,P.Z)(e,R));b.blockStatus=(0,C.IJ)(n);var h=(0,S.jsx)(m.Z,{ml:2,children:(0,S.jsx)(y.ZP,{children:"This block run has no output."})}),g=s&&s.length>0?(0,S.jsx)(w.Z,{columnHeaderHeight:c?T.Eh:0,columns:t,height:r-o-90,noBorderBottom:!0,noBorderLeft:!0,noBorderRight:!0,renderColumnHeader:c,rows:s}):h,j=(0,N.Pb)(f)?JSON.stringify(JSON.parse(f),null,2):f,O=f?(0,S.jsx)(m.Z,{ml:2,children:(0,S.jsx)(y.ZP,{monospace:!0,children:(0,S.jsx)("pre",{children:j})})}):h,Z=d&&p;return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{style:{position:"fixed",top:"50px"},children:Z&&(0,S.jsx)(m.Z,{py:E.cd,children:(0,S.jsx)(_.Z,{onClickTab:p,selectedTabUUID:null===d||void 0===d?void 0:d.uuid,tabs:a?B:[M]})})}),(0,S.jsxs)("div",{style:{position:"relative",top:"75px"},children:[(!a||M.uuid===(null===d||void 0===d?void 0:d.uuid))&&(0,S.jsx)(k.Z,A(A({},b),{},{height:r,heightOffset:(o||0)+(Z?I.u$:0),pipeline:l})),a&&U.uuid===(null===d||void 0===d?void 0:d.uuid)&&(0,S.jsxs)(S.Fragment,{children:[u&&(0,S.jsx)(m.Z,{mt:2,children:(0,S.jsx)(v.Z,{alignItems:"center",fullWidth:!0,justifyContent:"center",children:(0,S.jsx)(x.Z,{color:"white",large:!0})})}),!u&&i===D.Gi.TABLE&&g,!u&&i!==D.Gi.TABLE&&O]})]})]})}(q(q({},e),{},{blockRuns:be,columns:he,dataType:ve,loadingData:ae,rows:ge,selectedRun:u,selectedTab:L,setSelectedTab:G,showDynamicBlocks:!0,textData:fe}))},errors:z,pageName:F.M.RUNS,pipeline:X,setErrors:K,subheader:(Oe||me)&&(0,S.jsxs)(v.Z,{alignItems:"center",children:[g.BF.includes(ie)&&(0,S.jsxs)(f.Z,{children:[(0,S.jsx)(y.ZP,{bold:!0,default:!0,large:!0,children:"Pipeline is running"}),(0,S.jsx)(m.Z,{mr:1}),(0,S.jsx)(x.Z,{inverted:!0}),(0,S.jsx)(m.Z,{mr:2})]}),Oe&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(d.Z,{danger:!0,loading:le,onClick:function(e){(0,V.j)(e),ue({pipeline_run:{pipeline_run_action:"retry_blocks"}})},outline:!0,children:"Retry incomplete blocks"}),(0,S.jsx)(m.Z,{mr:2})]}),me&&(0,S.jsxs)(d.Z,{loading:le,onClick:function(e){(0,V.j)(e),ue({pipeline_run:{from_block_uuid:u.block_uuid,pipeline_run_action:"retry_blocks"}})},outline:!0,primary:!0,children:["Retry from selected block (",u.block_uuid,")"]})]}),title:function(e){var n=e.name;return"".concat(n," runs")},uuid:"".concat(F.M.RUNS,"_").concat(Y,"_").concat(te),children:[(0,S.jsx)(m.Z,{mt:E.cd,px:E.cd,children:(0,S.jsx)(b.Z,{level:5,children:"Block runs"})}),(0,S.jsx)(p.Z,{light:!0,mt:E.cd,short:!0}),je]})}J.getInitialProps=function(){var e=(0,i.Z)(l().mark((function e(n){var t,i,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.query,i=t.pipeline,r=t.run,e.abrupt("return",{pipeline:{uuid:i},pipelineRun:{id:r}});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var z=(0,O.Z)(J)},39525:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines/[pipeline]/runs/[run]",function(){return t(23588)}])}},function(e){e.O(0,[844,7607,5896,4804,1774,9350,5872,2125,1424,1005,8180,547,3714,3752,1286,4822,9774,2888,179],(function(){return n=39525,e(e.s=n);var n}));var n=e.O();_N_E=n}]);