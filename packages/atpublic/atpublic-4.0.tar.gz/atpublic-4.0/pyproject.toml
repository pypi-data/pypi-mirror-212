[project]
name = "atpublic"
authors = [
    { name = "Barry Warsaw", email = "barry@python.org" },
]
description = "Keep all y'all's __all__'s in sync"
readme = "README.rst"
requires-python = ">=3.8"
keywords = [
    "__all__",
    "public",
    "private",
]
classifiers = [
    "Development Status :: 5 - Production/Stable",
    "Development Status :: 6 - Mature",
    "Intended Audience :: Developers",
    "License :: OSI Approved :: Apache Software License",
    "Operating System :: POSIX",
    "Operating System :: MacOS :: MacOS X",
    "Operating System :: Microsoft :: Windows",
    "Programming Language :: Python",
    "Programming Language :: Python :: 3",
    "Topic :: Software Development :: Libraries",
    "Topic :: Software Development :: Libraries :: Python Modules",
    "Topic :: Utilities",
]
dependencies = []
dynamic = []
version = "4.0"

[project.license]
text = "Apache-2.0"

[project.urls]
"Home Page" = "https://public.readthedocs.io"
Documentation = "https://public.readthedocs.io"
Source = "https://gitlab.com/warsaw/public.git"
"Bug Tracker" = "https://gitlab.com/warsaw/public/issues"

[tool.pdm.version]
source = "file"
path = "src/public/__init__.py"

[tool.pdm.build]
source-includes = [
    "docs/",
    "test/",
    "tox.ini",
    "conftest.py",
]
excludes = [
    "*/.mypy_cache/",
]

[tool.pdm.dev-dependencies]
testing = [
    "coverage[toml]",
    "diff-cover",
    "pytest",
    "pytest-cov",
    "sybil",
]
qa = [
    "ruff",
    "mypy",
    "blue",
]
docs = [
    "sphinx",
    "furo",
]

[tool.pytest.ini_options]
addopts = "--cov=public --cov-report=term --cov-report=xml -p no:doctest"
testpaths = "test docs"

[tool.coverage.report]
fail_under = 100
show_missing = true

[tool.coverage.run]
branch = true
parallel = true

[tool.ruff]
line-length = 79
src = [
    "src",
]
select = [
    "B",
    "D",
    "E",
    "F",
    "I",
    "RUF100",
    "UP",
    "W",
]
ignore = [
    "D100",
    "D104",
]

[tool.ruff.pydocstyle]
convention = "pep257"

[tool.ruff.isort]
known-first-party = [
    "public",
]
lines-after-imports = 2
lines-between-types = 1
order-by-type = true

[tool.mypy]
mypy_path = "src"
disallow_any_generics = true
disallow_subclassing_any = true
disallow_untyped_calls = false
disallow_untyped_defs = true
disallow_incomplete_defs = true
check_untyped_defs = true
disallow_untyped_decorators = false
no_implicit_optional = true
warn_redundant_casts = true
warn_unused_ignores = true
warn_no_return = true
warn_return_any = true
warn_unreachable = true
implicit_reexport = false
strict_equality = true
show_error_context = true
show_column_numbers = true
show_error_codes = true
pretty = true
show_absolute_path = true
warn_unused_configs = true
verbosity = 0

[[tool.mypy.overrides]]
module = [
    "pytest",
    "sybil.*",
]
ignore_missing_imports = true

[build-system]
requires = [
    "pdm-backend",
]
build-backend = "pdm.backend"
